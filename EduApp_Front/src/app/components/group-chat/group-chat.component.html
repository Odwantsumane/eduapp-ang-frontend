<a routerLink="/" class="text-dark" data-bs-toggle="tooltip" title="Home"><i class="bi bi-arrow-left-short fs-2"></i></a>
<div class="d-flex w-100 border border rounded-4 m-2">
    <div class="chatgroups w-50 border rounded-4" style="height: 600px;">
        <div class="bg-light w-100 p-1 border-bottom" style="height: 55px;">
            <p class="fs-4">Chat Groups</p> 
        </div>
        <div class="d-flex flex-column" style="overflow-y: auto; height: 545px;">
            <div *ngFor="let chat of groupChats" class="w-100 p-1 border-bottom chat_group" >
                <span class="float-end me-1">10 min</span>
                <div class="d-flex" (click)="getMessages(chat._id)">
                    <div class="border rounded-4 m-2" style="height: 40px;width: 40px;">
                        <img src="favicon.ico" alt="chat profile" style="max-width: 100%; height: auto;">
                    </div>
                    <div class="mt-2">
                        <a href="#" class="fs-5 text-dark" style="text-decoration: none;">{{chat.title}}</a>
                        <p class="text-muted">{{chat.description}}</p>
                    </div>
                </div>
            </div>

            <!-- some placeholder -->
            <div class="w-100 p-1 rounded-bottom-4"> 
                <p style="text-align: center;">Studyo Chat</p>
                <p style="text-align: center;">t&cs</p>
            </div>
        </div>
        
    </div>

    <div class="d-flex flex-column w-50 conversation" style="height: 600px;">
        <div class="w-100 bg-light d-flex justify-content-between rounded-4" style="height: 10%;">
            <div class="ms-2 mt-1 mb-1 border rounded-4 p-2"><i class="bi bi-people-fill fs-3"></i></div>
            <div class="text-muted mt-3 p-3 d-flex flex-nowrap">
                <p>Odwa</p>
                <p>, Aphele</p>
                <p>, Andi</p>
                <p>, Lungi</p>
                <p>, Miz</p> 
                <p class="text-primary"> ..more</p>
            </div>
            <a href="#" class="p-2 text-dark"><i class="bi bi-three-dots-vertical fs-4"></i></a>
        </div>
        <div class="messages p-4 mb-3" style="height: 73%;"> 
            <div class="bg-light rounded-4" style="text-align: center;">End-to-end encrypted</div>
            <div class="w-100 h-100" style="overflow-y: auto;">
                <div *ngFor="let message of filteredMessages" class="w-100 d-flex flex-column flex-nowrap" style="height: fit-content;">
                    <div *ngIf="user[0].name +' '+ user[0].surname !== message.username" class="message w-100 d-flex mb-3" style="height: fit-content;">
                        <div class="external-message w-50 bg-white rounded-4">
                            
                            <!-- <p class="fs-6"><span class=""><i class="bi bi-person-circle fs-5"></i></span><span><b class="ps-1">{{message.username}}</b></span></p> -->
                            <p class="fs-6 bg-white"><img src="jkspr.jpg" alt="chat profile" style="max-width: 15%; height: 5%;" class="rounded-5"><span><br><b class="ps-1" style="font-size: small;">{{message.username}}</b></span></p>
                            <span *ngIf="(message.createdAt | date: 'dd/MM/yyyy') === (todayDate | date: 'dd/MM/yyyy')" class="text-muted me-1 float-end ps-1 me-2" style="font-size: small;">{{message.createdAt | date: 'hh:mm' : 'SAST'}}</span>
                            <span *ngIf="(message.createdAt | date: 'dd/MM/yyyy') === (yesterdayDate | date: 'dd/MM/yyyy')" class="text-muted me-1 float-end ps-1 me-2" style="font-size: small;">Yesterday</span>
                            <span *ngIf="(message.createdAt | date: 'dd/MM/yyyy') !== (yesterdayDate | date: 'dd/MM/yyyy') 
                                && (message.createdAt | date: 'dd/MM/yyyy') !== (todayDate | date: 'dd/MM/yyyy')" class="text-muted me-1 float-end ps-1 me-2" style="font-size: small;">{{message.createdAt | date: 'dd/MM/yyyy'}}</span>
                            <span class="text-muted ms-2 float-start fs-6"><i class="bi bi-emoji-smile"></i></span><br>
                            <p class="rounded-4 ps-2 pe-2 pb-2 bg-light" style="width: fit-content;">
                                {{message.message}}
                            </p> 
                        </div>
                        <div class="your-message w-50 p-2">
                            <p class="p-2 bg-white rounded-4"></p>
                        </div>
                    </div>
                    <div *ngIf="user[0].name +' '+ user[0].surname === message.username"  class="message w-100 d-flex mb-3" style="height: fit-content;">
                        <div class="external-message w-50 p-2">
                            <p class="p-2 bg-white rounded-4"></p>
                        </div>
                        <div class="external-message w-50 bg-white rounded-4">
                            
                            <span *ngIf="(message.createdAt | date: 'dd/MM/yyyy') === (todayDate | date: 'dd/MM/yyyy')" class="text-muted me-1 float-start ps-1 me-2" style="font-size: small;">{{message.createdAt | date: 'hh:mm' : 'SAST'}}</span>
                            <span *ngIf="(message.createdAt | date: 'dd/MM/yyyy') === (yesterdayDate | date: 'dd/MM/yyyy')" class="text-muted me-1 float-start ps-1 me-2" style="font-size: small;">Yesterday</span>
                            <span *ngIf="(message.createdAt | date: 'dd/MM/yyyy') !== (yesterdayDate | date: 'dd/MM/yyyy') 
                                && (message.createdAt | date: 'dd/MM/yyyy') !== (todayDate | date: 'dd/MM/yyyy')" class="text-muted me-1 float-start ps-1 me-2" style="font-size: small;">{{message.createdAt | date: 'dd/MM/yyyy'}}</span>
                            <span class="text-muted me-2 float-end fs-6"><i class="bi bi-emoji-smile"></i></span><br>
                            <!-- <p class="fs-6 bg-white"><img src="jkspr.jpg" alt="chat profile" style="max-width: 15%; height: 15%;" class="rounded-5"><span><b class="ps-1 fs-6">{{message.username}}</b></span></p> -->
                             <div class=" rounded-4 pt-2 ps-2 pe-2 float-end" style="width: fit-content; background-color: rgb(74, 100, 100);">
                                <p class="text-white " style="width: fit-content;">
                                    {{message.message}}
                                </p>
                             </div> 
                             <span class="float-end"><i class="bi bi-check fs-4 text-dark"></i></span>
                        </div>
                    </div> 
                </div>
            </div>
        </div>
        <div style="height: 15%;">
            <div *ngIf="typing" style="text-align: center; font-size: small;" class="text-muted">{{typingData.name}} is typing..</div>
            <div class="d-flex" style="height: 15%;">
                <a href="#" class="m-1 h-75 p-2 text-dark"><i class="bi bi-plus-square fs-5"></i></a>
                <a href="#" class="m-1 h-75 p-2 text-dark"><i class="bi bi-emoji-smile fs-5"></i></a>
                <div class="border rounded-4  m-1 text-muted p-2 w-100 d-flex justify-content-between" style="height: fit-content;">
                    <div class="" style="width: 95%;"><textarea name="messageFieldValue" id="message_toSend" rows="1" class="form-control"  placeholder="write message.." [(ngModel)]="messageFieldValue" (keydown.enter)="MonitorMessageTyping($event)" (input)="notifyWhenTyping()"></textarea></div>
                    <!-- <div class="" style="width: 95%;"><input type="text" name="" id="" class="border-light form-control" placeholder="write message.."></div> -->
                    <a href="#" class="text-dark" style="text-decoration: none;"><i class="bi bi-mic fs-5"></i></a>
                </div>
            </div>
        </div>
       
    </div>
</div>
